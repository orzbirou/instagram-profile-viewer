<div class="explore-grid">
  @for (item of items(); track trackByCode($index, item)) {
    <div 
      class="grid-item"
      (click)="onItemClick(item)"
      [attr.data-pk]="item.pk">
      
      <!-- Thumbnail image -->
      <img
        class="thumbnail"
        [src]="getImageUrl(item)"
        [alt]="'Post by ' + item.user.username"
        loading="lazy"
        width="300"
        height="300"
      />
      
      <!-- Media type indicators (top right) -->
      <div class="media-indicators">
        @if (hasCarousel(item)) {
          <svg class="indicator-icon carousel-icon" width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 3h6v6H3V3zm0 12h6v6H3v-6zM15 3h6v6h-6V3zm0 12h6v6h-6v-6z" opacity="0.6"/>
            <circle cx="7" cy="17" r="1.5"/>
            <circle cx="12" cy="17" r="1.5" opacity="0.5"/>
          </svg>
        }
        @if (hasVideo(item)) {
          <svg class="indicator-icon video-icon" width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 5v14l11-7z"/>
          </svg>
        }
      </div>
      
      <!-- Hover overlay with stats -->
      <div class="hover-overlay">
        <div class="stats">
          <div class="stat">
            <svg class="stat-icon" width="20" height="20" viewBox="0 0 20 20" fill="white" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 17.5L8.875 16.5C4.5 12.6 1.5 9.95 1.5 6.75C1.5 4.1 3.6 2 6.25 2C7.75 2 9.2 2.7 10 3.825C10.8 2.7 12.25 2 13.75 2C16.4 2 18.5 4.1 18.5 6.75C18.5 9.95 15.5 12.6 11.125 16.5L10 17.5Z"/>
            </svg>
            <span class="stat-count">{{ formatCount(item.like_count) }}</span>
          </div>
          <div class="stat">
            <svg class="stat-icon" width="20" height="20" viewBox="0 0 20 20" fill="white" xmlns="http://www.w3.org/2000/svg">
              <path d="M18 10C18 14.4183 14.4183 18 10 18C8.9 18 7.85 17.8 6.9 17.4L2 18L3.1 14.1C2.4 12.9 2 11.5 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10Z"/>
            </svg>
            <span class="stat-count">{{ formatCount(item.comment_count) }}</span>
          </div>
          @if (hasVideo(item) && getVideoViews(item)) {
            <div class="stat">
              <svg class="stat-icon" width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                <path d="M8 5v14l11-7z"/>
              </svg>
              <span class="stat-count">{{ formatCount(getVideoViews(item)!) }}</span>
            </div>
          }
        </div>
      </div>
    </div>
  }
</div>
